"use strict";(self.webpackChunkdocs_s_1_nscripts_com=self.webpackChunkdocs_s_1_nscripts_com||[]).push([[297],{2140:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>t,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>o,toc:()=>d});var s=i(5893),r=i(1151);const l={sidebar_position:1,title:"Exports",sidebar_label:"Exports"},c="Billing/Contract System",o={id:"billing/exports",title:"Exports",description:"Exports",source:"@site/docs/billing/exports.md",sourceDirName:"billing",slug:"/billing/exports",permalink:"/docs/billing/exports",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1,title:"Exports",sidebar_label:"Exports"},sidebar:"docs",previous:{title:"Config",permalink:"/docs/billing/config"},next:{title:"Installation",permalink:"/docs/locker/install"}},t={},d=[{value:"Exports",id:"exports",level:2},{value:"doesInvoiceExist (server-side only)",id:"doesinvoiceexist-server-side-only",level:3},{value:"createInvoice (server-side only)",id:"createinvoice-server-side-only",level:3},{value:"getSenderPersonalInvoices (server-side only)",id:"getsenderpersonalinvoices-server-side-only",level:3},{value:"getCompanyInvoices (server-side only)",id:"getcompanyinvoices-server-side-only",level:3},{value:"markInvoiceAsPaid (server-side only)",id:"markinvoiceaspaid-server-side-only",level:3},{value:"openBillingMenu (client-side only)",id:"openbillingmenu-client-side-only",level:3}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"billingcontract-system",children:"Billing/Contract System"}),"\n",(0,s.jsx)(n.h2,{id:"exports",children:"Exports"}),"\n",(0,s.jsx)(n.h3,{id:"doesinvoiceexist-server-side-only",children:"doesInvoiceExist (server-side only)"}),"\n",(0,s.jsx)(n.p,{children:"Check if an invoice exists in the database."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"referenceId"})," (string) - The reference ID of the invoice"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"boolean"})," - Whether the invoice exists or not"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'local exists = exports["s1n_billing"]:doesInvoiceExist("INV-123456")\n\nif exists then\n    print("Invoice exists")\nelse\n    print("Invoice doesn\'t exist")\nend\n'})}),"\n",(0,s.jsx)(n.h3,{id:"createinvoice-server-side-only",children:"createInvoice (server-side only)"}),"\n",(0,s.jsx)(n.p,{children:"Create an invoice"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"playerSource"})," - The player's server ID which is the sender of the invoice"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dataObject"})," - The data object of the invoice","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"receiver"})," (playerSource) - The source of the player who will receive the invoice"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"isJob"})," (boolean) - Whether the sender is sending the invoice with his current job or as a citizen"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"date"})," (string) - The date of the invoice (DATETIME format, e.g. ",(0,s.jsx)(n.code,{children:"2021-09-01 12:00:00"}),")"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"item"})," (string) - The item of the invoice"]}),"\n",(0,s.jsxs)(n.li,{children:["OPTIONAL ",(0,s.jsx)(n.code,{children:"note"})," (string) - A note for the invoice"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"amount"})," (number) - The amount of the invoice"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"boolean"})," - Whether the invoice was created successfully or not"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Replace the playerSource with the source of the player who is sending the invoice\n-- Replace the targetPlayerSource with the source of the player who will receive the invoice\nlocal success = exports["s1n_billing"]:createInvoice(senderPlayerSource, {\n    receiver = targetPlayerSource,\n    isJob = true,\n    date = "2021-09-01 12:00:00",\n    item = "Repair",\n    note = "Car repair",\n    amount = 100\n})\n\nif success then\n    print("Invoice created successfully")\nelse\n    print("Failed to create invoice")\nend\n'})}),"\n",(0,s.jsx)(n.h3,{id:"getsenderpersonalinvoices-server-side-only",children:"getSenderPersonalInvoices (server-side only)"}),"\n",(0,s.jsx)(n.p,{children:"Get the invoices sent and received of a given player"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"playerSource"})," - The player's server ID or nil if ",(0,s.jsx)(n.code,{children:"targetIdentifier"})," is provided"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dataObject"})," - The data object","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["OPTIONAL ",(0,s.jsx)(n.code,{children:"targetIdentifier"})," (string) - The identifier of the player to get the invoices from"]}),"\n",(0,s.jsxs)(n.li,{children:["OPTIONAL ",(0,s.jsx)(n.code,{children:"limit"})," (number) - The limit of invoices to get"]}),"\n",(0,s.jsxs)(n.li,{children:["OPTIONAL ",(0,s.jsx)(n.code,{children:"offset"})," (number) - The offset of invoices to get"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If an error occurs, it will return ",(0,s.jsx)(n.code,{children:"false"})]}),"\n",(0,s.jsx)(n.li,{children:"If the player has no invoices, it will return an empty table"}),"\n",(0,s.jsx)(n.li,{children:"If the player has invoices, it will return a table with the invoices"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Replace the playerSource with the source of the player who is sending the invoice\nlocal invoices = exports["s1n_billing"]:getSenderPersonalInvoices(playerSource, {\n    limit = 10,\n    offset = 0\n})\n\nif invoices then\n    for _, invoice in ipairs(invoices) do\n        print(invoice.referenceId)\n    end\nelse\n    print("Failed to get invoices")\nend\n\n-- OR, to get the invoices of a specific player using his identifier\n\nlocal targetInvoices = exports["s1n_billing"]:getSenderPersonalInvoices(nil, {\n    targetIdentifier = "steam:110000112345678",\n    limit = 10,\n    offset = 0\n})\n\nif targetInvoices then\n    for _, invoice in ipairs(targetInvoices) do\n        print(invoice.referenceId)\n    end\nelse\n    print("Failed to get invoices")\nend\n'})}),"\n",(0,s.jsx)(n.h3,{id:"getcompanyinvoices-server-side-only",children:"getCompanyInvoices (server-side only)"}),"\n",(0,s.jsx)(n.p,{children:"Get the invoices sent and received of a given company"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"playerSource"})," - The player's server ID who is part of the company"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Returns:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["If an error occurs, it will return ",(0,s.jsx)(n.code,{children:"false"})]}),"\n",(0,s.jsx)(n.li,{children:"If the company has no invoices, it will return an empty table"}),"\n",(0,s.jsx)(n.li,{children:"If the company has invoices, it will return a table with the invoices"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'-- Replace the playerSource with the source of the player who is part of the company\nlocal invoices = exports["s1n_billing"]:getCompanyInvoices(playerSource)\n\nif invoices then\n    for _, invoice in ipairs(invoices) do\n        print(invoice.referenceId)\n    end\nelse\n    print("Failed to get invoices")\nend\n'})}),"\n",(0,s.jsx)(n.h3,{id:"markinvoiceaspaid-server-side-only",children:"markInvoiceAsPaid (server-side only)"}),"\n",(0,s.jsx)(n.p,{children:"Mark an invoice as paid"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Parameters:"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"dataObject"})," - The data object of the invoice","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"id"})," (string) - The reference ID of the invoice"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'exports["s1n_billing"]:markInvoiceAsPaid({\n    id = "INV-123456"\n})\n'})}),"\n",(0,s.jsx)(n.h3,{id:"openbillingmenu-client-side-only",children:"openBillingMenu (client-side only)"}),"\n",(0,s.jsx)(n.p,{children:"Open the billing menu"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Example"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-lua",children:'exports["s1n_billing"]:openBillingMenu()\n'})})]})}function h(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},1151:(e,n,i)=>{i.d(n,{Z:()=>o,a:()=>c});var s=i(7294);const r={},l=s.createContext(r);function c(e){const n=s.useContext(l);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);